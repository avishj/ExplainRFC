---
import Layout from "@/layouts/Layout.astro";
import { ExhibitPlayer } from "@/components/exhibit";
import { rfcData as tcpData, storyboard as tcpStoryboard } from "@/data/rfcs/793-tcp/data";
import { rfcData as bgpData, storyboard as bgpStoryboard } from "@/data/rfcs/4271-bgp/data";

const rfcRegistry = {
  "793": { rfc: tcpData, storyboard: tcpStoryboard },
  "4271": { rfc: bgpData, storyboard: bgpStoryboard },
};

export function getStaticPaths() {
  return [
    { params: { id: "793" } },
    { params: { id: "4271" } },
  ];
}

const { id } = Astro.params;
const rfcEntry = rfcRegistry[id as keyof typeof rfcRegistry] || rfcRegistry["793"];
const rfc = rfcEntry.rfc;
const steps = rfcEntry.storyboard;

const title = `RFC ${rfc.id}: ${rfc.shortTitle} â€” Explain RFC`;
const description = rfc.description;
const base = import.meta.env.BASE_URL;
---

<Layout title={title} description={description}>
  <ExhibitPlayer 
    client:load 
    rfc={rfc} 
    storyboard={steps}
    baseUrl={base}
  />
</Layout>

<style>
  :global(body) {
    overflow: hidden;
  }
</style>
